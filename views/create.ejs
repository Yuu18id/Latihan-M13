<!DOCTYPE html>
<html lang="en" style="background-image: linear-gradient(#b3d4bb, #b3d4bb);
background-attachment: fixed;">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>REST API - MVC</title>
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="https://www.unpkg.com/bulma@0.9.3/css/bulma.css">
    </head>
    <body>
        <header>
            <nav style="background-color: #018410;" class="navbar is-info" role="navigation" aria-label="main navigation">
                <div class="navbar-brand">
                    <a class="navbar-item" href="/">
                        Bunny Web
                    </a>
                            <a role="button" class="navbar-burger" aria-label="menu" ariaexpanded="
    false" data-target="navbarBasicExample">
                                <span aria-hidden="true"></span>
                                <span aria-hidden="true"></span>
                                <span aria-hidden="true"></span>
                            </a>
                </div>
                <div class="navbar-menu">
                    <div class="navbar-end">
                        <div class="navbar-item">
                            <div class="mx-3">
                                <%= user.email %>
                            </div>
                            <div class="buttons">
                                <%- (!user?'<a href="/login" class="button is-light">Login</a>':'<a href="/logout" class="button is-light">Logout</a>') %>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
        </header>
        <div id="app" class="container is-max-desktop mt-5">
            <h1 class="title" style="text-align: center;">Add Supplier</h1>
            <div class="field"><label class="label">Company Name</label>
                <div class="control"><input type="text" placeholder="Company Name" class="input" name="company_name" id="company_name">
                </div>
            </div>
            <div class="field"><label class="label">Contact Name</label>
                <div class="control"><input type="text" placeholder="Contact Name" class="input" name="contact_name" id="contact_name">
                </div>
            </div>
            <div class="field"><label class="label">Email</label>
                <div class="control"><input type="text" placeholder="Email Address" class="input" name="email" id="email">
                </div>
            </div>
            <div class="field"><label class="label">Phone Number</label>
                <div class="control"><input type="text" placeholder="Phone Number" class="input" name="phone" id="phone">
                </div>
            </div>
            <div class="field"><label class="label">Active</label>
                <div class="control"><input type="text" placeholder="0/1" class="input" name="active" id="active">
                </div>
            </div>
            <div class="control">
                <button class="button is-success" id="save"> SAVE</button>
            </div>
        </div>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script>
            document.getElementById('save').onclick = () => {
                axios({
                    method: 'post',
                    url: '/api/suppliers',
                    data: {
                        company_name: document.getElementById("company_name").value.trim(),
                        contact_name: document.getElementById("contact_name").value.trim(),
                        email: document.getElementById("email").value.trim(),
                        phone: document.getElementById("phone").value.trim(),
                        active: document.getElementById("active").value.trim()
                }
            }).then((result) => {
                alert('Info status: ' + result.status)
                window.location = "/";
            }).catch((err) => {
                alert('error ' + err)
            });
        }
    </script>
</body>
</html>